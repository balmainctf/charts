<%- include header.ejs%>

<script>
    $("#7day").addClass('active');
    var myChart = echarts.init(document.getElementById('echarts'));

    $.getJSON('data/stationYieldInfo.json', function (data) {

        var _dates = [];
        var _vals = [];
        var unit = data.dataunit;
        $.each(data.data, function (key, val) {
            _dates.push(val.date);
            _vals.push(parseFloat(val.value));
        });

        myChart.setOption({
            title: {
                text: '电站收益图表数据',
                subtext: '7日数据'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['收益', 'test1', 'test2', 'test3']
            },
            toolbox: {
                show: true,
                feature: {
                    mark: {show: true},
                    dataView: {show: true, readOnly: false},
                    magicType: {show: true, type: ['line', 'bar']},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            xAxis: [
                {
                    type: 'category',
                    boundaryGap: false,
                    data: _dates
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    axisLabel: {
                        formatter: '{value} ' + unit
                    },
                    splitArea: {show: true}
                }
            ],
            series: [
                {
                    name: '收益',
                    type: 'line',
                    itemStyle: {
                        normal: {
                            lineStyle: {
                                shadowColor: 'rgba(0,0,0,0.4)',
                                shadowBlur: 5,
                                shadowOffsetX: 3,
                                shadowOffsetY: 3
                            }
                        }
                    },
                    data: _vals,
                    markPoint: {
                        data: [
                            {type: 'max', name: '最大值'},
                            {type: 'min', name: '最小值'}
                        ]
                    },
                    markLine: {
                        data: [
                            {type: 'average', name: '平均值'}
                        ]
                    }
                },
                {
                    name: 'test1',
                    type: 'line',
                    data: [-0.2, 30, 5.7, 11.3, 27.0, 22.0, 24.8]
                },
                {
                    name: 'test2',
                    type: 'line',
                    data: [0, 54.6, 3.5, 44.4, 13.5, 17.0, 18.6]
                },
                {
                    name: 'test3',
                    type: 'line',
                    data: [3.9, 31.2, 5.7, 86.5, 111.9, 15.2, 17.0]
                }
            ]
        });


        $('#highcharts').highcharts({
            chart: {
                zoomType: 'x',
                spacingRight: 20,
                resetZoomButton: {
                    position: {
                        // align: 'right', // by default
                        // verticalAlign: 'top', // by default
                        x: 0,
                        y: -30
                    }
                }
            },
            title: {
                text: '电站收益图表数据',
                x: -20 //center
            },
            subtitle: {
                text: '7日数据',
                x: -20
            },
            xAxis: {
                categories: _dates
            },
            yAxis: {
                title: {
                    text: '收益 (' + unit + ')'
                },
                plotLines: [
                    {
                        value: 0,
                        width: 1,
                        color: '#808080'
                    }
                ]
            },
            tooltip: {
                valueSuffix: unit
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle',
                borderWidth: 0
            },
            series: [
                {
                    name: '收益',
                    data: _vals
                },
                {
                    name: 'test1',
                    data: [-0.2, 30, 5.7, 11.3, 27.0, 22.0, 24.8]
                },
                {
                    name: 'test2',
                    data: [0, 54.6, 3.5, 44.4, 13.5, 17.0, 18.6]
                },
                {
                    name: 'test3',
                    data: [3.9, 31.2, 5.7, 86.5, 111.9, 15.2, 17.0]
                }
            ]
        });
    });

</script>
<%- include footer.ejs%>