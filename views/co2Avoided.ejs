<%- include header.ejs%>

<script>
    $("#co2Avoided").addClass('active');
    var myChart = echarts.init(document.getElementById('echarts'));

    $.getJSON('dynamicInfo', function (data) {
        var legendData = [];

        var _data = [];

        $.each(data, function (key, val) {
            legendData.push(key);
            _data.push({"value": val, "name": key});
        });

        myChart.setOption({
            title: {
                text: '电站动态信息',
                subtext: '纯属虚构',
                x: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                x: 'left',
                data: legendData
            },
            toolbox: {
                show: true,
                feature: {
                    mark: {show: true},
                    dataView: {show: true, readOnly: false},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            calculable: true,
            series: [
                {
                    name: '动态信息',
                    type: 'pie',
                    radius: '55%',
                    center: ['50%', 200],
                    data: _data
                }
            ]
        });
    });

</script>
<%- include footer.ejs%>