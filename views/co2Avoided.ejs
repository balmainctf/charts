<%- include common/header.ejs%>
<div class="container-fluid">
    <%- include common/menu.ejs%>
    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        <ul class="nav nav-pills">
            <li class="active"><a href="#">7 Days</a></li>
            <li><a href="#">12 Months</a></li>
            <li><a href="#">Year</a></li>
            <li><a href="#">Total</a></li>
        </ul>
        <div id="echarts" style="width: 888px; height: 400px; margin: 0"></div>
    </div>
</div>

<script>
    $("#co2Avoided").addClass('active');
    var myChart = echarts.init(document.getElementById('echarts'));

    $.getJSON('dynamicInfo', function (data) {
        var legendData = [];

        var _data = [];

        $.each(data, function (key, val) {
            legendData.push(key);
            _data.push({"value": val, "name": key});
        });

        myChart.setOption({
            title: {
                text: '电站动态信息',
                subtext: '纯属虚构',
                x: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                x: 'left',
                data: legendData
            },
            toolbox: {
                show: true,
                feature: {
                    mark: {show: true},
                    dataView: {show: true, readOnly: false},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            calculable: true,
            series: [
                {
                    name: '动态信息',
                    type: 'pie',
                    radius: '55%',
                    center: ['50%', 200],
                    data: _data
                }
            ]
        });
    });

</script>
<%- include common/footer.ejs%>